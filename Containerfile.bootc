FROM quay.io/acardace/fedora-laptop:base

LABEL quay.expires-after=8w

# Install Claude Code
RUN mkdir -p /var/roothome && \
    npm install -g @anthropic-ai/claude-code

# Copy system configuration files
COPY usr/ /usr/
COPY etc/ /etc/

# Set executable permissions and configure timezone/sudoers
RUN chmod +x /usr/local/bin/restic-backup.sh && \
    ln -sf ../usr/share/zoneinfo/Europe/Rome /etc/localtime && \
    echo '%wheel ALL=(ALL) ALL' > /etc/sudoers.d/wheel && \
    systemctl preset-all \

